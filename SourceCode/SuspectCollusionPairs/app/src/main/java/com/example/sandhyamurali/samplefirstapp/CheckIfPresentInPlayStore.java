package com.example.sandhyamurali.samplefirstapp;




import android.net.Uri;
import android.os.AsyncTask;

import java.io.IOException;
import java.net.HttpURLConnection;
import java.net.URL;

public class CheckIfPresentInPlayStore extends AsyncTask<String, String, String> {

    private String present;
    String appname;

    public CheckIfPresentInPlayStore(String packageName) {
        appname = packageName;

    }



    @Override
    protected String doInBackground(String... params) {

        try {

            Uri uriBuilder = Uri.parse("https://play.google.com/store/apps/details?id="+ appname);
            URL url =new URL(uriBuilder.toString());
            HttpURLConnection connection = null;
            connection = (HttpURLConnection) url.openConnection();
            int code = connection.getResponseCode();

            if(code==HttpURLConnection.HTTP_OK)
            {
                present="true";

            }

            else
                present="false";



        } catch (IOException e) {
            e.printStackTrace();
        }

        return present;

    }


    @Override
    protected void onPostExecute(String onlineVersion) {
        super.onPostExecute(onlineVersion);

        //if (onlineVersion != null && !onlineVersion.isEmpty()) {
        //   if (Float.valueOf(currentVersion) < Float.valueOf(onlineVersion)) {
        //show dialog
        // }
        // }
        //Log.e("version ", "" + onlineVersion);
    }
}
